:root{
  --bg:#ffffff; --fg:#0f172a; --muted:#6b7280; --line:#e5e7eb; --panel:#f8fafc;
  --accent:#111827; --glow:rgba(17,24,39,.08);
  --mono:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  --sans:"Inter", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
  --r:12px; --shadow: 0 16px 40px var(--glow), 0 2px 10px rgba(0,0,0,.04);
}
@media (prefers-color-scheme: dark){
  :root{ --bg:#0b1020; --fg:#e5e7eb; --muted:#9aa5b1; --line:#1f2937; --panel:#0f172a; --accent:#e5e7eb; --glow:rgba(99,102,241,.12) }
}
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0; color:var(--fg); background:
    radial-gradient(900px 600px at 10% -10%, rgba(99,102,241,.16), transparent 60%),
    radial-gradient(900px 600px at 110% 10%, rgba(56,189,248,.12), transparent 60%),
    var(--bg);
  font-family:var(--sans); -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
.skip-link{ position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden }
.skip-link:focus{ left:1rem; top:1rem; width:auto; height:auto; padding:.5rem 1rem; background:var(--panel); border:1px solid var(--line); border-radius:8px }

.topbar{
  position:sticky; top:0; z-index:10; display:flex; align-items:center; justify-content:space-between; gap:1rem;
  padding:.8rem 1rem; border-bottom:1px solid var(--line); backdrop-filter:saturate(180%) blur(8px);
  background:color-mix(in oklab, var(--bg) 85%, transparent);
}
.brand{ display:flex; align-items:center; gap:.6rem }
.brand .dot{ width:10px; height:10px; border-radius:50%; background:linear-gradient(135deg,#6366f1,#22d3ee); box-shadow:0 0 24px rgba(99,102,241,.5) }
.muted{ color:var(--muted); margin-left:.3rem }
.actions{ display:flex; gap:.4rem; align-items:center }
.pill, .ghost, .pill.outline{
  border-radius:999px; padding:.45rem .8rem; font-weight:600; cursor:pointer; border:1px solid transparent;
}
.pill{ background:var(--fg); color:var(--bg) }
.pill:hover{ filter:brightness(1.05) }
.pill.outline{ background:transparent; color:var(--fg); border-color:var(--fg) }
.ghost{ background:transparent; border:1px solid var(--line); color:var(--fg) }

.wrap{ max-width:1100px; margin:0 auto; padding:1rem }
.stage{
  position:relative; border:1px solid var(--line); border-radius:16px; overflow:hidden;
  box-shadow:var(--shadow); background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 90%, transparent), transparent 40%);
}
canvas{ width:100%; height:auto; display:block; }

.hud{
  position:absolute; left:12px; top:12px; font-family:var(--mono); font-size:.9rem;
  background:color-mix(in oklab, var(--bg) 80%, transparent); border:1px solid var(--line); padding:.35rem .6rem; border-radius:10px;
}
.tooltip{
  position:absolute; right:12px; bottom:12px; font-size:.9rem; color:var(--muted);
  background:color-mix(in oklab, var(--bg) 80%, transparent); border:1px dashed var(--line); padding:.35rem .6rem; border-radius:10px;
}
.onboarding{
  position:absolute; left:50%; transform:translateX(-50%); bottom:14px; color:var(--muted);
  background:color-mix(in oklab, var(--bg) 80%, transparent); border:1px solid var(--line); border-radius:999px; padding:.25rem .7rem;
}
kbd{ font-family:var(--mono); border:1px solid var(--line); border-radius:6px; padding:.05rem .3rem; font-size:.85em }

.modal{ border:none; border-radius:16px; padding:0; width:min(620px, calc(100% - 2rem)); background:var(--bg); box-shadow:var(--shadow); }
.modal::backdrop{ background:rgba(0,0,0,.35); backdrop-filter:blur(2px) }
.modal form{ padding:1rem }
.modal h2{ margin:.2rem 0 .8rem }
.modal ul{ margin:.3rem 0 .8rem 1.2rem }
.modal menu{ display:flex; justify-content:flex-end; gap:.5rem; margin:0 }

.ft-list{ list-style:none; padding:0; margin:0; display:grid; gap:.35rem }
.ft-list button{ text-align:left; border:1px solid var(--line); background:var(--panel); border-radius:10px; padding:.6rem .7rem; cursor:pointer }
.ft-list button:hover{ filter:brightness(1.03) }

.palette[hidden]{ display:none }
.palette{ position:fixed; inset:0; background:rgba(2,6,23,.45); backdrop-filter:blur(2px); z-index:50; display:grid; place-items:center; padding:1rem }
.pal-card{ width:min(760px, 100%); background:var(--bg); border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow); padding:1rem }
.pal-title{ font-weight:700; display:block; margin-bottom:.35rem }
.pal-input{ width:100%; padding:.7rem .9rem; border:1px solid var(--line); border-radius:10px }
.pal-list{ list-style:none; margin:.5rem 0 0; padding:0; max-height:50vh; overflow:auto }
.pal-list li{ padding:.55rem .6rem; border-radius:8px; display:flex; align-items:center; justify-content:space-between; gap:.6rem }
.pal-list li[aria-selected="true"], .pal-list li:hover{ background:var(--panel) }
.pal-hint{ color:var(--muted); font-size:.85rem; text-align:center; margin:.6rem 0 0 }

.listview{ margin-top:1rem; border:1px solid var(--line); border-radius:16px; background:var(--panel); box-shadow:var(--shadow) }
.lv-content{ padding:1rem 1rem 1.2rem }
.lv-content h2{ margin:.2rem 0 .4rem }
.lv-content h3{ margin:.3rem 0 .2rem }
.lv-content ul{ margin:.1rem 0 .6rem 1.2rem }
.lv-meta{ color:var(--muted); font-size:.95rem }

.footer{ color:var(--muted); text-align:center; padding:1rem }

@media (prefers-reduced-motion: reduce){
  .onboarding, .palette, .modal::backdrop{ animation:none }
}


