:root{
  --bg:#0e0f12; --card:#12141a; --ink:#f2f5f7; --muted:#a6b0bd; --border:#1f2430;
  --exp:#e50914; /* Experience */
  --proj:#2dd4bf; /* Projects */
  --edu:#60a5fa;  /* Education */
  --pub:#a78bfa;  /* Publications */
  --skill:#f59e0b;/* Skills */
  --contact:#34d399; /* Contact */
  --rail:#0a0b0f;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background: radial-gradient(1200px 600px at 20% -10%, #10131b 0, var(--bg) 60%) fixed, var(--bg);
  color:var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
}

/* Layout */
.topbar{
  display:flex; gap:12px; align-items:center; justify-content:space-between;
  padding:10px 14px; border-bottom:1px solid var(--border);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
  position:sticky; top:0; z-index:10;
}
.brand{ display:flex; gap:10px; align-items:center }
.brand .dot{ width:10px; height:10px; border-radius:999px; background: linear-gradient(180deg,#ff4848,#c9000b); box-shadow:0 0 12px rgba(229,9,20,.6) }
.brand .muted{ color:var(--muted) }
.actions{ display:flex; gap:8px; align-items:center }
.actions input{
  border:1px solid var(--border); background:#0f1218; color:var(--ink);
  padding:8px 10px; border-radius:10px; min-width:240px;
}
.actions button{ border:1px solid var(--border); background:#141823; color:var(--ink); padding:8px 12px; border-radius:10px; cursor:pointer }
.actions button:hover{ filter:brightness(1.1) }

.layout{
  display:grid; grid-template-columns: 260px 1fr 360px; gap:14px; padding:14px;
}
.card{ background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)); border:1px solid var(--border); border-radius:16px; padding:10px; box-shadow:0 10px 40px rgba(0,0,0,.35) }

.legend label{ display:flex; align-items:center; gap:8px; margin:6px 0 }
.chip{ font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid var(--border); background:#121722 }
.chip-exp{ border-color:#6b0a0e; color:#ffb3b6 }
.chip-proj{ border-color:#0d6a61; color:#bff4ee }
.chip-edu{ border-color:#245691; color:#cfe4ff }
.chip-pub{ border-color:#5a3fa8; color:#e8deff }
.chip-skill{ border-color:#684d12; color:#ffe7b6 }
.chip-contact{ border-color:#13644a; color:#bdf7e1 }
.tip{ font-size:12px; color:var(--muted); margin-top:8px }

.map{ position:relative; min-height:400px; }
#metro{ width:100%; height:auto; display:block; background:
  linear-gradient(180deg, rgba(255,255,255,.01), rgba(255,255,255,.02)),
  radial-gradient(1200px 600px at 80% -10%, rgba(80,130,255,.07), transparent 60%);
  border-radius:12px;
}
.rail{ fill:none; stroke-linecap:round; stroke-linejoin:round; stroke-width:12; opacity:.9; filter: drop-shadow(0 2px 0 rgba(0,0,0,.6)) }
.rail.exp{ stroke: var(--exp) }
.rail.proj{ stroke: var(--proj) }
.rail.edu{ stroke: var(--edu) }
.rail.pub{ stroke: var(--pub) }
.rail.skill{ stroke: var(--skill) }
.rail.contact{ stroke: var(--contact) }

.station{ cursor:pointer }
.node{ fill:#0f1116; stroke:#d6e0ea; stroke-width:2.5 }
.node.exp{ stroke: var(--exp) }
.node.proj{ stroke: var(--proj) }
.node.edu{ stroke: var(--edu) }
.node.pub{ stroke: var(--pub) }
.node.skill{ stroke: var(--skill) }
.node.contact{ stroke: var(--contact) }
.label{ fill:#d9e3ee; font-size:12px; paint-order: stroke; stroke:#0b0d12; stroke-width:4px; }

.tooltip{
  position:absolute; padding:6px 8px; background:#0e1a2a; border:1px solid var(--border); border-radius:8px;
  font-size:12px; color:#e6f0ff; transform: translate(-50%, -120%); pointer-events:none; white-space:nowrap;
}
.hidden{ display:none }

.panel{ position:sticky; top:70px; height: calc(100dvh - 90px); overflow:auto }
.panel .close{ float:right; border:none; background:transparent; color:#cbd6e2; font-size:16px; cursor:pointer }
.panel h2{ margin:4px 0 0 }
.panel .muted{ color:var(--muted) }
.tags{ display:flex; flex-wrap:wrap; gap:6px; margin-top:8px }
.tag{ font-size:12px; background:#0a1322; border:1px solid var(--border); padding:2px 8px; border-radius:999px }
.links a{ display:inline-block; margin-right:10px; margin-top:8px; color:#8ad0ff; text-decoration:none }
.links a:hover{ text-decoration:underline }
.panel ul{ margin:8px 0 0 18px }

.printable{
  position:fixed; inset:0; background:var(--bg); display:flex; align-items:center; justify-content:center; z-index:20;
}
.print-inner{ width:min(900px, 92vw); background:#12141a; border:1px solid var(--border); border-radius:16px; padding:18px 20px }
.printable .small{ font-size:12px; color:var(--muted) }

.foot{ text-align:center; color:var(--muted); font-size:12px; padding:10px 14px 16px }

@media (max-width: 1100px){
  .layout{ grid-template-columns: 1fr; }
  .panel{ position:relative; top:auto; height:auto }
}
@media print{
  body{ background: #fff; color:#000 }
  .topbar, .layout .legend, .map, .foot{ display:none !important }
  .printable{ position:relative; background:#fff }
  .print-inner{ width:auto; background:#fff; border:none; padding:0 }
}
