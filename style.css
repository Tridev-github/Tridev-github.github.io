:root{
  --bg: #ffffff; --fg:#0f172a; --muted:#64748b; --line:#e2e8f0; --panel:#f8fafc;
  --accent:#6b8afd; --accent-2:#8b5cf6; --ring:#93c5fd;
  --mono:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  --sans:"Inter", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  --rad:14px; --shadow: 0 10px 30px rgba(2,6,23,.08), 0 2px 8px rgba(2,6,23,.04);
}
@media (prefers-color-scheme: dark){
  :root{ --bg:#0b1020; --fg:#e5e7eb; --muted:#9aa5b1; --line:#1f2937; --panel:#0f172a; --accent:#9ab4ff; --accent-2:#b79cff; --ring:#60a5fa; }
}
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0; font-family:var(--sans); color:var(--fg); background:radial-gradient(1200px 800px at 10% -10%, rgba(107,138,253,.22), transparent), var(--bg);
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
.skip-link{ position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden }
.skip-link:focus{ left:1rem; top:1rem; width:auto; height:auto; padding:.5rem 1rem; background:var(--panel); border:1px solid var(--line); border-radius:8px }

.site-header{
  position:sticky; top:0; z-index:50; display:flex; justify-content:space-between; align-items:center; gap:1rem;
  padding:.75rem 1rem; border-bottom:1px solid var(--line); backdrop-filter:saturate(180%) blur(8px);
  background:color-mix(in oklab, var(--bg) 85%, transparent);
}
.brand{ display:flex; align-items:center; gap:.6rem }
.nav-toggle{ display:none; }
.logo-dot{ width:12px; height:12px; border-radius:50%; background:linear-gradient(135deg,var(--accent),var(--accent-2)); box-shadow:0 0 20px color-mix(in oklab, var(--accent) 60%, transparent) }
.brand-name{ font-weight:700; letter-spacing:.2px }
.brand-sub{ color:var(--muted); font-size:.9rem }
.header-actions{ display:flex; gap:.5rem; align-items:center }
.btn, .btn-ghost, .btn.outline{
  border-radius:999px; padding:.5rem .9rem; font-weight:600; border:1px solid transparent; cursor:pointer; background:var(--fg); color:var(--bg);
}
.btn:hover{ filter:brightness(1.05) }
.btn-ghost{ background:transparent; color:var(--fg); border-color:var(--line) }
.btn.outline{ background:transparent; color:var(--fg); border-color:var(--fg) }
.select select{ border:1px solid var(--line); background:var(--panel); color:var(--fg); border-radius:999px; padding:.5rem .9rem; font-weight:600 }
.pill-switch{ display:flex; background:var(--panel); border:1px solid var(--line); border-radius:999px; padding:.25rem }
.pill-switch button{ all:unset; padding:.35rem .7rem; border-radius:999px; cursor:pointer; font-weight:700; color:var(--muted) }
.pill-switch button[aria-selected="true"]{ background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:white; box-shadow:var(--shadow) }

.layout{ display:grid; grid-template-columns:280px 1fr; min-height:calc(100vh - 64px) }
.sidebar{
  border-right:1px solid var(--line); padding:1rem; position:sticky; top:64px; height:calc(100dvh - 64px); overflow:auto; background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 75%, transparent), transparent 40%);
}
.searchbox input{ width:100%; padding:.6rem .8rem; border-radius:10px; border:1px solid var(--line); background:var(--bg); color:var(--fg) }
.toc{ list-style:none; padding:0; margin:1rem 0; display:grid; gap:.25rem }
.toc a{ display:block; padding:.5rem .6rem; border-radius:8px; color:inherit; text-decoration:none }
.toc a:hover, .toc a:focus{ background:var(--panel); outline:none }
.sidebar-footer{ margin-top:2rem; display:grid; gap:.3rem }
.sidebar-footer a{ color:var(--muted); text-decoration:none }

.content{ padding:2rem 2rem 4rem; }
.intro .lede{ color:var(--muted); font-size:1.1rem }
.grad{ background:linear-gradient(135deg, var(--accent), var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent }
.quick-badges{ display:flex; flex-wrap:wrap; gap:.5rem; margin:.8rem 0 0 }
.quick-badges li{ list-style:none; border:1px solid var(--line); padding:.4rem .6rem; border-radius:999px; font-weight:600; color:var(--muted) }

.block{ margin-top:2rem }
.block h2{ margin:0 0 1rem; position:relative }
.block h2::after{ content:""; position:absolute; left:0; bottom:-.4rem; width:60px; height:3px; border-radius:2px; background:linear-gradient(135deg,var(--accent),var(--accent-2)) }

.endpoints{ display:grid; gap:1rem }
.endpoint{
  border:1px solid var(--line); border-radius:var(--rad); background:var(--panel); box-shadow:var(--shadow); overflow:hidden;
}
.endpoint-header{
  display:flex; justify-content:space-between; gap:1rem; align-items:flex-start; padding:1rem 1rem .5rem;
}
.endpoint-path{ font-family:var(--mono); font-size:.95rem; padding:.25rem .5rem; border-radius:6px; background:var(--bg); border:1px solid var(--line) }
.endpoint-meta{ color:var(--muted); font-size:.9rem }
.endpoint-body{ display:grid; gap:.75rem; padding:0 1rem 1rem }
.kv{ display:flex; gap:.5rem; flex-wrap:wrap }
.kv .chip{ font-family:var(--mono); font-size:.85rem; padding:.25rem .5rem; border:1px dashed var(--line); border-radius:999px }
.points{ margin:0; padding-left:1.2rem }
.points li{ margin:.25rem 0 }
.points li[data-dimmed="true"]{ opacity:.5 }

.chips{ display:flex; flex-wrap:wrap; gap:.5rem }
.chip{ padding:.35rem .6rem; border-radius:999px; border:1px solid var(--line); background:var(--bg) }

.cards{ display:grid; gap:1rem }
.card{ border:1px solid var(--line); border-radius:12px; padding:1rem; background:var(--panel) }

.story.hidden{ display:none }
.story-hero{ padding:2rem 1rem 1rem; border-bottom:1px solid var(--line) }
.story-steps{ max-width:900px; margin:1.5rem auto; display:grid; gap:1.25rem }
.step{
  border:1px solid var(--line); border-radius:16px; padding:1.25rem; background:
    linear-gradient(180deg, color-mix(in oklab, var(--panel) 75%, transparent), transparent 45%);
  box-shadow:var(--shadow);
}
.step h3{ margin:.2rem 0 .6rem }
.step .meta{ color:var(--muted); font-size:.9rem }
.metric{ display:inline-block; font-family:var(--mono); background:var(--bg); border:1px solid var(--line); padding:.2rem .45rem; border-radius:999px; margin-right:.4rem }

.palette[hidden]{ display:none }
.palette{ position:fixed; inset:0; background:rgba(2,6,23,.45); backdrop-filter:blur(2px); z-index:100 }
.palette-container{
  width:min(720px, calc(100% - 2rem)); margin:10vh auto 0; background:var(--bg);
  border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow); padding:1rem;
}
.palette-label{ font-weight:700; display:block; margin-bottom:.3rem }
#palette-input{ width:100%; padding:.7rem .9rem; border:1px solid var(--line); border-radius:10px; }
#palette-list{ list-style:none; margin:.5rem 0 0; padding:0; max-height:50vh; overflow:auto }
#palette-list li{ padding:.55rem .6rem; border-radius:8px; display:flex; gap:.6rem; align-items:center; justify-content:space-between }
#palette-list li[aria-selected="true"], #palette-list li:hover{ background:var(--panel) }
.palette-hint{ color:var(--muted); font-size:.85rem; margin:.6rem 0 0; text-align:center }

.site-footer{ margin-top:3rem; color:var(--muted); border-top:1px solid var(--line); padding-top:1rem }

:focus-visible{ outline:3px solid var(--ring); outline-offset:2px }

/* Mobile */
@media (max-width: 960px){
  .layout{ grid-template-columns:1fr }
  .sidebar{ position:fixed; inset:64px 0 auto 0; height:auto; max-height:calc(100dvh - 64px); transform:translateY(-100%); transition:transform .25s ease; z-index:49; background:var(--bg) }
  .nav-toggle{ display:inline-block; border:1px solid var(--line); background:var(--panel); border-radius:8px; padding:.2rem .5rem; }
  .sidebar.open{ transform:none }
}

/* motion safety */
@media (prefers-reduced-motion: reduce){
  .sidebar{ transition:none }
}
